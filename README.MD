# 设计模式Java实现
这里只是设计模式的一些Java代码实例演示. 
作为<软件秘籍 设计模式那点事>的代码笔记保存, 还有一些例子. 

# 第一部分 创建型模式

## 1.简单工厂模式SimpleFactory
简单来说就是根据参数的不同返回不同类的实例, 被创建的实例通常
都具有共同的父类. 
JDK中Calendar类的createCalendar方法创建实例时就使用了简单工厂模式. 
### 1. 图表库ChartLibrary
某软件公司要基于Java语言开发一套图表库，该图表库可以
为应用系统提供多种不同外观的图表，例如柱状图(HistogramChart)、
饼状图(PieChart)、折线图(LineChart)等。该软件公司图表库
设计人员希望为应用系统开发人员提供一套灵活易用的图表库，
通过设置不同的参数即可得到不同类型的图表，而且可以较为方便地
对图表库进行扩展，以便能够在将来增加一些新类型的图表。
现使用简单工厂模式来设计该图表库。

## 2.工厂方法模式FactoryMethod
工厂方法模式简单来说是一个特定的工厂创建一个特定的产品. 
JDK中java.util.List作为一个抽象接口工厂, 它有一个iterator()
方法, 该方法会返回一个迭代器接口Iterator(抽象产品). 
List子类java.util.LinkedList实现iterator()方法, 返回具体的
产品AbstractList$ListItr. 
List子类java.util.ArrayList实现iterator()方法, 返回具体的
产品AbstractList$Itr. 
他们返回的产品都是AbstractList内部类, 实现了Iterator接口. 
### 1.曹操献刀CaoCaoOfferedKnife
书中作者提到的一个例子, 在曹操献刀这个故事中, 王允作为武器工厂
生产抽象宝刀, 而曹操则负责生产具体的七星宝刀, 曹操2则是八星
宝刀. (为什么标题是刀, 里面是剑...)
我修改了源代码的包结构, 使例子更容易理解. 
### 2.日志记录系统LoggerSystem
某系统运行日志记录器(Logger)可以通过多种途径保存系统的
运行日志，例如通过文件记录或数据库记录，用户可以通过修改
配置文件灵活地更换日志记录方式。在设计各类日志记录器时，
开发人员发现需要对日志记录器进行一些初始化工作，初始化参数
的设置过程较为复杂，而且某些参数的设置有严格的先后次序，
否则可能会发生记录失败。
为了更好地封装记录器的初始化过程并保证多种记录器切换的
灵活性，现使用工厂方法模式设计该系统。
(因为只是作为工厂方法模式的学习演示, 修改配置文件的那部分
就不在这里实现了)

## 3.抽象工厂模式AbstractFactory
提供一个用于创建相关或者依赖对象的家族(产品族)的接口, 
而不需要指定具体实现类. 
JDK中java.sql.DriverManager就是抽象工厂的一个实现吧. 
Mysql, Oracle等驱动管理器继承于它, 从而生产不同的
Connection, Statement, PreparedStatement等产品…
### 1.窗口换肤 皮肤库SkinLibrary
某软件公司要开发一套界面皮肤库，可以对基于Java的桌面软件
进行界面美化。用户在使用时可以通过菜单来选择皮肤，不同的
皮肤将提供视觉效果不同的按钮、文本框、组合框等界面元素，
例如春天(Spring)风格的皮肤将提供浅绿色的按钮、绿色边框的
文本框和绿色边框的组合框，而夏天(Summer)风格的皮肤则提供
浅蓝色的按钮、蓝色边框的文本框和蓝色边框的组合框。
该皮肤库需要具备良好的灵活性和可扩展性，用户可以自由选择
不同的皮肤，开发人员可以在不修改既有代码的基础上增加新的皮肤。
现使用抽象工厂模式来设计该界面皮肤库。
### 2.顾客kfc点餐KfcFactory
这是书作者举的一个例子, 但我觉得这个例子没有上面的那个换皮肤
好理解. 

## 4.建造者模式Builder
使用场合: 生成的产品对象内部结构复杂. 不同建造者定义不同的构建过程. 
JavaSDK中StringBuilder就是一个简易的没有建造者的建造者模式. 
### 1.手机套餐创建MobilePackage
作者举的一个例子, 例子中手机套餐作为一个复杂的对象, 客户
作为终端需求, 营业厅操作员作为指导者通知建造者(计算机)
需要生产什么样的手机套餐, 最后返回手机套餐(产品). 
### 2.简易游戏角色的构建GameActorBuilde
游戏角色具有复杂但结构相似的对象, 使用建造者模式构建复杂的
角色.

## 5.原型模式Protorype
简单来说生产新的复杂对象直接从模板那里复制一份就行了. 
使用场合: 产生的对象原型比较复杂, 初始化需要许多资源时, 
希框架原型和产生对象分开时, 同一个对象供其他调用者同时访问时. 
### 1. 重复的日常生活DailyLife
小李每天都过着重复的日常生活, 但偶尔每天只有一点小改变, 所以
今天的小李相对于昨天的小李来说或许只是其中某一个方面不一样了, 
不同天的小李都差不了多少. (这个例子用的是Object对象的clone方法. )
### 2. 相似的周报WeeklyLogSystem
在使用某OA系统时, 有些岗位的员工发现他们每周的工作都大同小异, 
因此在填写工作周报时很多内容都是重复的, 为了提高工作周报的创建效率, 
大家迫切希望有一种机制能够快速创建相同或者相似的周报, 包括
创建周报的附件. (附件有两种克隆方式. 浅克隆和深克隆, 这里的
深克隆用的是序列化的深克隆方式而不是Object里面的clone. )

## 6.单例模式Singleton
单例模式主要想做的就是在系统中只允许有一个实例. 作者说了两种
创建单例模式类的方法, 一种是判断当前类是否为null, 然后再
创建, 不过这可能会导致线程不安全的问题所以需要用synchronized
关键字. 
第二种方法是直接在类里new, 获得实例的方法直接返回, 这样对比
第一种方式提高了执行效率, 缺点是产生内存浪费. 
### 1. 懒汉式单例方法Method1
懒汉式用了锁的方法来确保不会出现脏读, 有几种锁的方式. 
### 2. 饿汉式单例方方法Method2
饿汉式直接返回. 

# 第二部分 结构型模式
## 7.适配器模式Adapter
将一个类的接口转换成客户希望的另一个接口, 适配器模式让那些
接口不兼容的类可以一起工作. 简单理解就是适配器通过一个类能转变为
我需要的那个类. 
### 1. 电源适配器PowerAdapter
当你只有220v电源的时候, 你想让它变成12v电源, 那么电源适配器
类将包裹一个220v电源的类, 并实现12v的接口, 使其支持12v电源. 
(这个例子使用了两种适配器的实现方法, 对象适配器和类适配器. )
### 2. 玩具车ToyCar
某公司欲开发一款儿童玩具汽车, 为了更好地吸引小朋友的注意力, 
该玩具汽车在移动过程中伴随着灯光闪烁和声音提示. 在该公司以往的
产品中已经实现了控制灯光闪烁(例如警灯闪烁)和声音提示(例如警笛音效)
的程序, 为了重用先前的代码并且使得汽车控制软件具有更好的灵活性和扩展性, 
现使用适配器模式设计该玩具汽车控制软件. 


## 8.桥接模式Bridge
### 1.跨平台图像浏览系统ImageParseInMultipleSystem
某软件公司要开发一个跨平台图像浏览系统，要求该系统能够
显示BMP、JPG、GIF、PNG等多种格式的文件，并且能够在
Windows、Linux、UNIX等多个操作系统上运行。
系统首先将各种格式的文件解析为像素矩阵(Matrix)，
然后将像素矩阵显示在屏幕上，在不同的操作系统中可以调用
不同的绘制函数来绘制像素矩阵。另外，系统需具有较好的
扩展性，以便在将来支持新的文件格式和操作系统。
试使用桥接模式设计该跨平台图像浏览系统。
### 2.开关和电灯SwitchsAndLights
开关和电灯都可以多维度扩充, 怎么样实现呢?

## 22.策略模式Strategy
### 1.打折策略选择MarketPromotion
商品打折策略选择, 我们有: 打8折商品促销策略, 
满1000减200商品促销策略, 高于200部分打8折商品促销策略
应该如何用策略模式实现?
### 2.不同企业的口号StrategyOfCompany
企业策略选择(超简单实现)
不同的企业有着不同的口号.



